jobs:
  include:
    - stage: compile
      language: java
      jdk: openjdk12
      sudo: required
      cache:
        directories:
          - "$HOME/.m2"
      install: mvn install -DskipTests=true -Dmaven.javadoc.skip=true -Drevision=${TRAVIS_COMMIT} -B -V
      script: skip

    - stage: test
      language: java
      jdk: openjdk12
      sudo: required
      cache:
        directories:
          - "$HOME/.m2"

      install: mvn install -DskipTests=true -Dmaven.javadoc.skip=true -Drevision=${TRAVIS_COMMIT} -B -V
      script: mvn test -Drevision=${TRAVIS_COMMIT} -B

    - stage: build
      services:
        - docker

      script: docker build -t mitchtalmadge/uofu-cs-bot .
